


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: GathererSets</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../index.html">all classes</a> ]
    [ <a href="../index.html">org.mage.plugins.card.dl.sources</a> ]
</div>

<h1>Coverage Summary for Class: GathererSets (org.mage.plugins.card.dl.sources)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GathererSets</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 69)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;package org.mage.plugins.card.dl.sources;
<i>2</i>&nbsp;
<i>3</i>&nbsp;import java.io.File;
<i>4</i>&nbsp;import java.util.ArrayList;
<i>5</i>&nbsp;import java.util.HashMap;
<i>6</i>&nbsp;import java.util.Iterator;
<i>7</i>&nbsp;import org.mage.plugins.card.dl.DownloadJob;
<i>8</i>&nbsp;import static org.mage.plugins.card.dl.DownloadJob.fromURL;
<i>9</i>&nbsp;import static org.mage.plugins.card.dl.DownloadJob.toFile;
<i>10</i>&nbsp;
<i>11</i>&nbsp;public class GathererSets implements Iterable&lt;DownloadJob&gt; {
<i>12</i>&nbsp;
<b class="nc"><i>13</i>&nbsp;    private static final String SETS_PATH = File.separator + &quot;sets&quot;;</b>
<b class="nc"><i>14</i>&nbsp;    private static final File DEFAULT_OUT_DIR = new File(&quot;plugins&quot; + File.separator + &quot;images&quot; + SETS_PATH);</b>
<b class="nc"><i>15</i>&nbsp;    private static File outDir = DEFAULT_OUT_DIR;</b>
<i>16</i>&nbsp;
<b class="nc"><i>17</i>&nbsp;    private static final String[] symbols =     {&quot;10E&quot;, &quot;9ED&quot;, &quot;8ED&quot;, &quot;7ED&quot;, &quot;6ED&quot;, &quot;5ED&quot;, &quot;4ED&quot;, &quot;3ED&quot;, &quot;2ED&quot;, &quot;LEB&quot;, &quot;LEA&quot;,</b>
<i>18</i>&nbsp;                                                 &quot;HOP&quot;,
<i>19</i>&nbsp;                                                 &quot;ARN&quot;, &quot;ATQ&quot;, &quot;LEG&quot;, &quot;DRK&quot;, &quot;FEM&quot;, &quot;HML&quot;,
<i>20</i>&nbsp;                                                 &quot;ICE&quot;, &quot;ALL&quot;, &quot;CSP&quot;,
<i>21</i>&nbsp;                                                 &quot;MIR&quot;, &quot;VIS&quot;, &quot;WTH&quot;,
<i>22</i>&nbsp;                                                 &quot;TMP&quot;, &quot;STH&quot;, &quot;EXO&quot;,
<i>23</i>&nbsp;                                                 &quot;USG&quot;, &quot;ULG&quot;, &quot;UDS&quot;,
<i>24</i>&nbsp;                                                 &quot;MMQ&quot;, &quot;NMS&quot;, &quot;PCY&quot;,
<i>25</i>&nbsp;                                                 &quot;INV&quot;, &quot;PLS&quot;, &quot;APC&quot;,
<i>26</i>&nbsp;                                                 &quot;ODY&quot;, &quot;TOR&quot;, &quot;JUD&quot;,
<i>27</i>&nbsp;                                                 &quot;ONS&quot;, &quot;LGN&quot;, &quot;SCG&quot;,
<i>28</i>&nbsp;                                                 &quot;MRD&quot;, &quot;DST&quot;, &quot;5DN&quot;,
<i>29</i>&nbsp;                                                 &quot;CHK&quot;, &quot;BOK&quot;, &quot;SOK&quot;,
<i>30</i>&nbsp;                                                 &quot;RAV&quot;, &quot;GPT&quot;, &quot;DIS&quot;,
<i>31</i>&nbsp;                                                 &quot;TSP&quot;, &quot;TSB&quot;, &quot;PLC&quot;, &quot;FUT&quot;,
<i>32</i>&nbsp;                                                 &quot;LRW&quot;, &quot;MOR&quot;,
<i>33</i>&nbsp;                                                 &quot;SHM&quot;, &quot;EVE&quot;,
<i>34</i>&nbsp;                                                 &quot;MED&quot;, &quot;ME2&quot;, &quot;ME3&quot;, &quot;ME4&quot;,
<i>35</i>&nbsp;                                                 &quot;POR&quot;, &quot;PO2&quot;, &quot;PTK&quot;,
<i>36</i>&nbsp;                                                 &quot;ARC&quot;,
<i>37</i>&nbsp;                                                 &quot;W16&quot;};
<i>38</i>&nbsp;
<b class="nc"><i>39</i>&nbsp;    private static final String[] withMythics = {&quot;M10&quot;, &quot;M11&quot;, &quot;M12&quot;, &quot;M13&quot;, &quot;M14&quot;, &quot;M15&quot;, &quot;ORI&quot;,</b>
<i>40</i>&nbsp;                                                 &quot;ANB&quot;,
<i>41</i>&nbsp;                                                 &quot;DDF&quot;, &quot;DDG&quot;, &quot;DDH&quot;, &quot;DDI&quot;, &quot;DDJ&quot;, &quot;DDK&quot;, &quot;DDL&quot;, &quot;DDM&quot;, &quot;DDN&quot;,
<i>42</i>&nbsp;                                                 &quot;DD3&quot;, &quot;DD3B&quot;, &quot;DDO&quot;, &quot;DDP&quot;, &quot;DDQ&quot;, &quot;DDR&quot;, &quot;DDS&quot;,
<i>43</i>&nbsp;                                                 &quot;FVD&quot;, &quot;FVE&quot;, &quot;FVL&quot;, &quot;FVR&quot;,
<i>44</i>&nbsp;                                                 &quot;V12&quot;, &quot;V13&quot;, &quot;V14&quot;, &quot;V15&quot;, &quot;V16&quot;,
<i>45</i>&nbsp;                                                 &quot;ALA&quot;, &quot;CON&quot;, &quot;ARB&quot;,
<i>46</i>&nbsp;                                                 &quot;ZEN&quot;, &quot;WWK&quot;, &quot;ROE&quot;,
<i>47</i>&nbsp;                                                 &quot;SOM&quot;, &quot;MBS&quot;, &quot;NPH&quot;,
<i>48</i>&nbsp;                                                 &quot;CMD&quot;, &quot;C13&quot;, &quot;C14&quot;, &quot;C15&quot;, &quot;C16&quot;, &quot;CMA&quot;,
<i>49</i>&nbsp;                                                 &quot;PC2&quot;, &quot;PCA&quot;,
<i>50</i>&nbsp;                                                 &quot;ISD&quot;, &quot;DKA&quot;, &quot;AVR&quot;,
<i>51</i>&nbsp;                                                 &quot;RTR&quot;, &quot;GTC&quot;, &quot;DGM&quot;,
<i>52</i>&nbsp;                                                 &quot;MMA&quot;, &quot;MM2&quot;, &quot;EMA&quot;, &quot;MM3&quot;,
<i>53</i>&nbsp;                                                 &quot;THS&quot;, &quot;BNG&quot;, &quot;JOU&quot;,
<i>54</i>&nbsp;                                                 &quot;CNS&quot;, &quot;CN2&quot;,
<i>55</i>&nbsp;                                                 &quot;VMA&quot;, &quot;TPR&quot;,
<i>56</i>&nbsp;                                                 &quot;KTK&quot;, &quot;FRF&quot;, &quot;DTK&quot;,
<i>57</i>&nbsp;                                                 &quot;BFZ&quot;, &quot;EXP&quot;, &quot;OGW&quot;,
<i>58</i>&nbsp;                                                 &quot;SOI&quot;, &quot;EMN&quot;,
<i>59</i>&nbsp;                                                 &quot;KLD&quot;, &quot;MPS&quot;, &quot;AER&quot;,
<i>60</i>&nbsp;                                                 &quot;AKH&quot;, &quot;HOU&quot;
<i>61</i>&nbsp;                                                };
<b class="nc"><i>62</i>&nbsp;    private static final HashMap&lt;String, String&gt; symbolsReplacements = new HashMap&lt;&gt;();</b>
<i>63</i>&nbsp;
<i>64</i>&nbsp;    static {
<b class="nc"><i>65</i>&nbsp;        symbolsReplacements.put(&quot;ARN&quot;, &quot;AN&quot;);</b>
<b class="nc"><i>66</i>&nbsp;        symbolsReplacements.put(&quot;ATQ&quot;, &quot;AQ&quot;);</b>
<b class="nc"><i>67</i>&nbsp;        symbolsReplacements.put(&quot;LEG&quot;, &quot;LE&quot;);</b>
<b class="nc"><i>68</i>&nbsp;        symbolsReplacements.put(&quot;DRK&quot;, &quot;DK&quot;);</b>
<b class="nc"><i>69</i>&nbsp;        symbolsReplacements.put(&quot;FEM&quot;, &quot;FE&quot;);</b>
<b class="nc"><i>70</i>&nbsp;        symbolsReplacements.put(&quot;HML&quot;, &quot;HM&quot;);</b>
<b class="nc"><i>71</i>&nbsp;        symbolsReplacements.put(&quot;ICE&quot;, &quot;IA&quot;);</b>
<b class="nc"><i>72</i>&nbsp;        symbolsReplacements.put(&quot;ALL&quot;, &quot;AL&quot;);</b>
<b class="nc"><i>73</i>&nbsp;        symbolsReplacements.put(&quot;APC&quot;, &quot;AP&quot;);</b>
<b class="nc"><i>74</i>&nbsp;        symbolsReplacements.put(&quot;TMP&quot;, &quot;TE&quot;);</b>
<b class="nc"><i>75</i>&nbsp;        symbolsReplacements.put(&quot;INV&quot;, &quot;IN&quot;);</b>
<b class="nc"><i>76</i>&nbsp;        symbolsReplacements.put(&quot;PLS&quot;, &quot;PS&quot;);</b>
<b class="nc"><i>77</i>&nbsp;        symbolsReplacements.put(&quot;WTH&quot;, &quot;WL&quot;);</b>
<b class="nc"><i>78</i>&nbsp;        symbolsReplacements.put(&quot;ULG&quot;, &quot;GU&quot;);</b>
<b class="nc"><i>79</i>&nbsp;        symbolsReplacements.put(&quot;USG&quot;, &quot;UZ&quot;);</b>
<b class="nc"><i>80</i>&nbsp;        symbolsReplacements.put(&quot;UDS&quot;, &quot;CG&quot;);</b>
<b class="nc"><i>81</i>&nbsp;        symbolsReplacements.put(&quot;ODY&quot;, &quot;OD&quot;);</b>
<b class="nc"><i>82</i>&nbsp;        symbolsReplacements.put(&quot;MMQ&quot;, &quot;MM&quot;);</b>
<b class="nc"><i>83</i>&nbsp;        symbolsReplacements.put(&quot;NMS&quot;, &quot;NE&quot;);</b>
<b class="nc"><i>84</i>&nbsp;        symbolsReplacements.put(&quot;PCY&quot;, &quot;PR&quot;);</b>
<b class="nc"><i>85</i>&nbsp;        symbolsReplacements.put(&quot;STH&quot;, &quot;ST&quot;);</b>
<b class="nc"><i>86</i>&nbsp;        symbolsReplacements.put(&quot;EXO&quot;, &quot;EX&quot;);</b>
<b class="nc"><i>87</i>&nbsp;        symbolsReplacements.put(&quot;VIS&quot;, &quot;VI&quot;);</b>
<b class="nc"><i>88</i>&nbsp;        symbolsReplacements.put(&quot;MIR&quot;, &quot;MI&quot;);</b>
<b class="nc"><i>89</i>&nbsp;        symbolsReplacements.put(&quot;7ED&quot;, &quot;7E&quot;);</b>
<b class="nc"><i>90</i>&nbsp;        symbolsReplacements.put(&quot;6ED&quot;, &quot;6E&quot;);</b>
<b class="nc"><i>91</i>&nbsp;        symbolsReplacements.put(&quot;5ED&quot;, &quot;5E&quot;);</b>
<b class="nc"><i>92</i>&nbsp;        symbolsReplacements.put(&quot;4ED&quot;, &quot;4E&quot;);</b>
<b class="nc"><i>93</i>&nbsp;        symbolsReplacements.put(&quot;3ED&quot;, &quot;3E&quot;);</b>
<b class="nc"><i>94</i>&nbsp;        symbolsReplacements.put(&quot;2ED&quot;, &quot;2U&quot;);</b>
<b class="nc"><i>95</i>&nbsp;        symbolsReplacements.put(&quot;LEB&quot;, &quot;2E&quot;);</b>
<b class="nc"><i>96</i>&nbsp;        symbolsReplacements.put(&quot;LEA&quot;, &quot;1E&quot;);</b>
<b class="nc"><i>97</i>&nbsp;        symbolsReplacements.put(&quot;DD3A&quot;, &quot;DD3&quot;);</b>
<b class="nc"><i>98</i>&nbsp;        symbolsReplacements.put(&quot;DD3B&quot;, &quot;DD3&quot;);</b>
<b class="nc"><i>99</i>&nbsp;        symbolsReplacements.put(&quot;DD3C&quot;, &quot;DD3&quot;);</b>
<b class="nc"><i>100</i>&nbsp;        symbolsReplacements.put(&quot;DD3D&quot;, &quot;DD3&quot;);</b>
<i>101</i>&nbsp;    }
<i>102</i>&nbsp;
<b class="nc"><i>103</i>&nbsp;    public GathererSets(String path) {</b>
<b class="nc"><i>104</i>&nbsp;        if (path == null) {</b>
<b class="nc"><i>105</i>&nbsp;            useDefaultDir();</b>
<i>106</i>&nbsp;        } else {
<b class="nc"><i>107</i>&nbsp;            changeOutDir(path);</b>
<i>108</i>&nbsp;        }
<i>109</i>&nbsp;    }
<i>110</i>&nbsp;
<i>111</i>&nbsp;    @Override
<i>112</i>&nbsp;    public Iterator&lt;DownloadJob&gt; iterator() {
<b class="nc"><i>113</i>&nbsp;        ArrayList&lt;DownloadJob&gt; jobs = new ArrayList&lt;&gt;();</b>
<b class="nc"><i>114</i>&nbsp;        for (String symbol : symbols) {</b>
<b class="nc"><i>115</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;C&quot;));</b>
<b class="nc"><i>116</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;U&quot;));</b>
<b class="nc"><i>117</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;R&quot;));</b>
<i>118</i>&nbsp;        }
<b class="nc"><i>119</i>&nbsp;        for (String symbol : withMythics) {</b>
<b class="nc"><i>120</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;C&quot;));</b>
<b class="nc"><i>121</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;U&quot;));</b>
<b class="nc"><i>122</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;R&quot;));</b>
<b class="nc"><i>123</i>&nbsp;            jobs.add(generateDownloadJob(symbol, &quot;M&quot;));</b>
<i>124</i>&nbsp;        }
<b class="nc"><i>125</i>&nbsp;        return jobs.iterator();</b>
<i>126</i>&nbsp;    }
<i>127</i>&nbsp;
<i>128</i>&nbsp;    private DownloadJob generateDownloadJob(String set, String rarity) {
<b class="nc"><i>129</i>&nbsp;        File dst = new File(outDir, set + &quot;-&quot; + rarity + &quot;.jpg&quot;);</b>
<b class="nc"><i>130</i>&nbsp;        if (symbolsReplacements.containsKey(set)) {</b>
<b class="nc"><i>131</i>&nbsp;            set = symbolsReplacements.get(set);</b>
<i>132</i>&nbsp;        }
<b class="nc"><i>133</i>&nbsp;        String url = &quot;http://gatherer.wizards.com/Handlers/Image.ashx?type=symbol&amp;set=&quot; + set + &quot;&amp;size=small&amp;rarity=&quot; + rarity;</b>
<b class="nc"><i>134</i>&nbsp;        return new DownloadJob(set + &quot;-&quot; + rarity, fromURL(url), toFile(dst));</b>
<i>135</i>&nbsp;    }
<i>136</i>&nbsp;
<i>137</i>&nbsp;    private void changeOutDir(String path) {
<b class="nc"><i>138</i>&nbsp;        File file = new File(path + SETS_PATH);</b>
<b class="nc"><i>139</i>&nbsp;        if (file.exists()) {</b>
<b class="nc"><i>140</i>&nbsp;            outDir = file;</b>
<i>141</i>&nbsp;        } else {
<b class="nc"><i>142</i>&nbsp;            file.mkdirs();</b>
<b class="nc"><i>143</i>&nbsp;            if (file.exists()) {</b>
<b class="nc"><i>144</i>&nbsp;                outDir = file;</b>
<i>145</i>&nbsp;            }
<i>146</i>&nbsp;        }
<i>147</i>&nbsp;    }
<i>148</i>&nbsp;
<i>149</i>&nbsp;    private void useDefaultDir() {
<b class="nc"><i>150</i>&nbsp;        outDir = DEFAULT_OUT_DIR;</b>
<i>151</i>&nbsp;    }
<i>152</i>&nbsp;}
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2016-12-08 20:37</div>
</div>
</body>
</html>
